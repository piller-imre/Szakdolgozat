\chapter{Procedurális generálás}

\section{A procedurális generálás szerepe}

A számítógépes játékok alapvető részét képezik a különféle tartalmak, mint például a textúrák, modellek, térképek. A procedurális generálás egy olyan módszer, amely segítségével ezeket algoritmikus módon hozhatunk létre. Ebben az esetben a programozó egy algoritmust és annak paraméterezését adja meg az előállításukhoz, ahelyett, hogy azokat maga modellezné vagy szerkesztené meg \cite{ProceduralGeneration}.

A számítógépi grafikában gyakran használják a véletlenszerű generálás fogalmat erre a megoldásra. A procedurális generálás egyik nagy előnye az, hogy nagy mennyiségű tartalom készíthető a játékhoz úgy, hogy ezek perzisztens tárolására nincs szükség. Mindazonáltal, ha sikerül ezt a technikát jól alkalmaznunk, akkor a generálásnak a véletlenszerűségét kihasználva változatosabb, kevésbé előre megjósolható pályákat vagy feladatokat készíthetünk a játékosok számára, ezáltal növelve a játékélményt.  

\section{Előfordulása a játékokban}
%\cite{Daggerfall}\cite{Civ1}\cite{Spore}
%\cite{ProceduralGeneration}\cite{CivV}

A műfaj egyik, már-már legendásnak számító alkotása a \textit{Bethesda Softworks} által 1996-ban kiadott \textit{The Elder Scrolls II: Daggerfall} \cite{Daggerfall}, amely egy nyílt világú szerepjáték. A játékban a játékosnak lehetősége van például létrehozni saját varázslatokat különböző hatásokkal, amiknek a költségét az algoritmus fogja meghatározni azáltal, hogy milyen erősségűre sikerült a varázslat. Hasonló módszerrel oldották meg a játékban a felszerelések fejlesztési rendszerét, a ház és hajó vásárlást, a ruhák és felszerelések változatosságát. A játék ezenfelül rendelkezik dinamikus politikai rendszerrel. A politikai rendszerben számít az, hogy a karakter milyen céhnek a tagja, milyen vallású, milyen feladatokat és küldetéseket, cselekedeteket hajt végre. Ez alapján a politikai rendszer alapján dől el, hogy a különböző NPC-k (\textit{Non-Player Character}, számítógép által irányított karakterek) hogyan viszonyultak a játékoshoz. 

A \textit{Bethesda} állítása alapján a játék térképének a mérete közel azonos a Brit-szigetek méretével, számszerűen 229 848 $km^2$. A játékban több mint 15000 település és város kapott helyett. Emellett több mint 750000 NPC is szerepel. 

A \textit{The Elder Scrolls II: Daggerfall}-nak az egyik legnagyobb negatívuma a generáláshoz felhasznált limitált mennyiségű építőelem, amiből a városok és a falvak épületei épülnek fel. Ez sok játékosnál monotónia érzetet keltett. 

2002-ben a sorozat következő részében az alkotók már tanultak korábbi hibáikból és a \textit{The Elder Scrolls III: Morrowind} esetében a korábbinál jóval kisebb térképet készítettek ami körülbelül $0,01 \%$-a volt az előzőnek, számokban kifejezve 24 $km^2$ \cite{Daggerfall}. Viszont a kisebb térképnek köszönhetően a világot sokkal részletgazdagabbá tudták tenni. A városok, települések, és az NPC-k is sokkal egyedibb megjelenést kaptak.

Az alkalmazáshoz amit készítettem megjelenésre leginkább a \textit{Civilization} széria hasonlít, amely az első négy részében még négyzetrácsot alkalmazott a térkép ábrázolásához, de 2010-ben a \textit{Civilization V} -ben már áttértek a hexagon alapú térképre \cite{Civ1}. Általánosságban elmondható a \textit{Civilization} sorozat játékairól, hogy a térképek procedurálisan generáltak már 1990 óta, kivéve a Föld térképet (bár ebben is előfordulhattak kisebb eltérések játékról-játékra). A \textit{Civilization V} esetén a véletlenszerű térképek miatt majdnem minden esetben procedurálisan kellett generálni a hegyeket, folyókat, városokat, utakat \cite{CivV}. A játékos a játék kezdete előtt meghatározhatja, hogy milyen alakú legyen a térkép és annak egyéb tulajdonságait a széleskörű beállítási lehetőségek által. A játékosnak módjában áll létrehozni kis szigetekből álló szigetcsoportot (\textit{Archipeligo}) egy nagyobb kontinenst (\textit{Pangaea}) vagy akár olyan térképet ami két nagyobb kontinensből áll (\textit{Continents}). A \textit{Civilization} procedurális generátorától a legtöbb esetben azt kapjuk amit várunk tőle. Már előre tudhatjuk, hogy milyen térképet fog generálni, nem jellemző, hogy váratlan vagy szokatlan legyen az eredmény. A \textit{Civilization} esetében azonban pontosan ez az amire szükségünk lenne.

A \textit{Minecraft} az egész játékvilág létrehozására algoritmusokat használ. Ezek óriási átalakításokon mentek át az évek során. A játékmenet alapvetően két fő elemre építkezik: a felfedezésre és az építésre. A felfedezés során lehet hozzájutni különböző nyersanyagokhoz amikből aztán később lehet építkezni. A \textit{Minecraft}-ban a felfedezést az teszi izgalmassá, hogy már-már végtelennek számító véletlenszerűen generált térképet sikerült megtölteni szokatlan természeti jelenségekkel amelyek néhány esetben a valóságon alapulnak de sok más esetben a fikcióval keveredik. Könnyen belátható, hogy egy jól működő procedurális generálás nélkül a \textit{Minecraft} sem lehetne ilyen sikeres. Az elméletileg végtelen térkép, a változatos növényzet és a kifejezetten jónak számító procedurális generáló algoritmus ellenére is azzal kell szembesülnünk, hogy rengeteg ismétlődéssel találkozunk. Globális szinten, ha jobban megfigyeljük a környezetet feltűnhet, hogy 10-ből 9-szer nagyon hasonló képet látunk. Az apró részletek különbözőek lesznek, de az egészét tekintve nagyon sok hasonlóságot tudunk felfedezni a különböző részek között, a tipikus füves területek mellett pár kockányira mindig feltűnik egy-egy hegy, mivel így épülnek fel a különböző területek az algoritmusban. 

A \textit{Spore}-ban a fő hangsúly a különböző lények és bolygók generálásán volt \cite{Spore}. A játékban szereplő összes lény teljes mértékben generált volt, és semmilyen modellt nem használtak a létrehozásukhoz. Ezért az összes élőlény animációja akkor jött létre, amikor a játékos megalkotta őket, az alapján ahogyan megalkotta őket. Például, ha a játékos egy négy lábú lényt készített, akkor arra számíthatott, hogy úgy fog mozogni mint egy ló. A játék legelső bemutatásakor a készítők egy három lábú lényen mutatták be, hogy hogyan működik a folyamat és az algoritmus megállapította, hogy hogyan fog mozogni az általuk létrehozott lény. A játék különböző szakaszaiban a lények különböző képességekre tesznek szert vadászat, evés, úszás, különböző objektum megfogása, tánc amiket szintén algoritmus generál. A készítők bemutattak különböző előre elkészített lényeket, amelyek realisztikusan mozogtak annak ellenére, hogy például volt olyan amelyiknek több feje és 6 lába volt.
\newpage
Az ismertetett példák többségében megfelelően használták a procedurális generálást a tartalom előállítására. A \textit{Civilization} arra használta, hogy elrendezze a terepet és a nyersanyagokat a térképen. A \textit{Minecraft} sikerének az egyik oka a procedurálisan generált térkép. Azt láthatjuk, hogy magával a procedurális generálásnak a használatával semmi probléma nincs, abban az esetben, ha megfelelően alkalmazzák azt. Megfelelő alatt jelen esetben elsődlegesen azt kell érteni, hogy abban az esetben, amikor valami különös, egyedi megjelenés a cél vagy a játék szempontjából szükségét látják annak, hogy a játékos minden alkalommal más lényekkel vagy térképpel találkozzon. Amennyiben túlzásba viszik, vagy nincs megfelelően kidolgozva, az könnyen tönkreteheti, vagy legalábbis ronthatja a játékélményt.

Első ránézésre úgy tűnhet, hogy a procedurális generálás valamilyen csodaeszköz a játékfejlesztésben, ami egy csapásra megold minden problémát. Mivel elméleti síkon végtelen számú variációjú tartalmat képes generálni, ami végtelen számú újrajátszhatósági értéket jelentene a játék számára, mivel minden egyes alkalommal mást kellene látnunk. Gyakorlatban ez sajnos nem így működik. Gyakran pont az ellenkezőjét sikerül elérni és nagyon nehéz megtalálni a helyes egyensúlyt, vagyis a kevesebb néha több.

